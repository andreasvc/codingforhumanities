\documentclass[aspectratio=169,usenames,dvipsnames]{beamer}
\usepackage{preamble}
\title{Coding for Humanities, week 3}

\begin{document}

\begin{frame}
 \titlepage
\end{frame}

\begin{frame}{Last week}
    Sequences

    Conditions

    Loops
\end{frame}

\begin{frame}{Plan for today}
 \tableofcontents
\end{frame}

\section{Last week's exercises}
\begin{frame}[fragile]{The Final Quiz}
What we want you to do is write code that counts the number of word tokens in
which the letter 'a' is present in a small corpus. You need to do this on the
basis of a frequency distribution of words that is represented by a list of
\texttt{[word, frequency]} pairs.

For example, the word \emph{happening} has an \emph{a} and it occurs
4 times, therefore this word contributes 4 to the total result.
Assign your value to the variable \texttt{number\_of\_words\_with\_a}.

\begin{lstlisting}
frequency_distribution = [['Beg', 1], ["Goddard's", 1], ...]
number_of_words_with_a = 0
# insert your code here
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{The Final Quiz}
\begin{lstlisting}
frequency_distribution = [['Beg', 1], ["Goddard's", 1], ...]
number_of_words_with_a = 0
for word_and_frequency in frequency_distribution:
    if 'a' in word_and_frequency[0]:
        number_of_words_with_a += word_and_frequency[1]
\end{lstlisting}

\pause
Better:
\begin{lstlisting}
for word, frequency in frequency_distribution:
    if 'a' in word:
        number_of_words_with_a += frequency
\end{lstlisting}
\end{frame}


\begin{frame}{How to solve problems}
    \begin{columns}
        \column{0.5\linewidth}
            The Feynman algorithm:
            \begin{enumerate}
                \item Write down the problem.
                \item Think real hard.
                \item Write down the solution.
            \end{enumerate}

            \vspace{1em}
            due to Richard Feynman, Nobel-prize winning physicist \dots
        \column{0.5\linewidth}\centering
            \includegraphics[width=0.6\textwidth]{fig/feynman}

            \vspace{1em} Richard Feynman (1918--1988)
    \end{columns}
\end{frame}

\begin{frame}{How to solve problems}
    \begin{columns}
        \column{0.5\linewidth}
            PÃ³lya (1945), How to solve it:

            \begin{enumerate}
                \item First, you have to understand the problem.
                \item After understanding, make a plan.
                \item Carry out the plan.
                \item Look back on your work. How could it be better?
            \end{enumerate}

            \begin{block}{Stuck?}
            If you can't solve a problem,
            then there is an easier problem you can solve:
            find it.
            \end{block}
        \column{0.5\linewidth}\centering
            \includegraphics[width=0.6\textwidth]{fig/howtosolveit}

            \vspace{1em} George P\'olya (1887--1985)
    \end{columns}
\end{frame}



\begin{frame}{The 10 exercises}
    \centering\Large
    \url{https://gist.github.com/andreasvc/60ae38960c1d4c1e1941bf8e96bb2d5f}
\end{frame}



\section{Data organization}
\subsection{Dictionaries}
\frame{\tableofcontents[currentsection]}

\begin{frame}
    \begin{itemize}
        \item Lists are useful when data has a natural order: \\
            get items by their position
        \pause
        \item What if we have lots of data,
            but we need to find it some other way?
    \end{itemize}

    \begin{block}{Example}
    Finding words in a dictionary

    Too many words to consider one-by-one

    However, due to organization (sorted), can find words quickly
    \end{block}
\end{frame}


\begin{frame}[fragile]{dictionaries}
    \begin{definition}
        A dictionary stores pairs of values (key, value),
        such that we can quickly find a value given a key.
    \end{definition}
Example, a phone book:
\begin{lstlisting}
>>> coworkers = {'John': 123, 'Mary': 456, 'Alice': 789}
>>> coworkers['Mary']
456
>>> coworkers['Bob'] = 124
\end{lstlisting}

% Explanation of hash tables:
% https://dev.to/a_sandrina_p/learning-hash-tables-with-drawings-99o
\end{frame}

\begin{frame}{Properties of dictionaries}
A dictionary is a mapping of keys to values.

    \begin{itemize}
        \item Looking up a key is fast
        \item Keys must be immutable (e.g., numbers or strings).
        \item Values can be anything.
        \item Keys are always unique;
            re-using a key will overwrite the previous value.
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Looping over dictionaries}
Looping over a dictionary returns only the keys:
\begin{lstlisting}
data = {'a': 0, 'b': 1}
for key in data:
    print(key)
    print(data[key])
\end{lstlisting}

\pause
Often want both the key and the value:
\begin{lstlisting}
for key, value in data.items():
    print(key)
    print(value)
\end{lstlisting}
\end{frame}



\begin{frame}[fragile]{Lists vs dictionaries: practical example}
Two ways of organizing a collection of books:
\begin{lstlisting}
>>> books = ['Tolstoy - War and Peace',
...     'Tolstoy - Anna Karenina',
...     'Dostoevsky - Crime and Punishment',
...     'Dostoevsky - Brothers Karamazov']
\end{lstlisting}

\pause
\begin{lstlisting}
>>> books = {'Tolstoy': ['War and Peace', 'Anna Karenina'],
...     'Dostoevsky': ['Crime and Punishment', 'Brothers Karamazov']}
>>> books['Tolstoy']
...
\end{lstlisting}
Can easily select works by a particular author!
\end{frame}

\begin{frame}{Algorithms + Data structures = Programs}
    \begin{columns}
        \column{0.5\linewidth}
            \begin{itemize}
                \item Thinking of how to organize your data is an important
                    first step in designing a program
                \item The right organization may make the rest of the design
                    obvious
                \item Often a trade-off: particular choices may make one thing
                    easy and another hard
            \end{itemize}
        \column{0.5\linewidth}
            \includegraphics[height=0.8\textheight]{fig/wirth}
    \end{columns}
\end{frame}




\section{Defining functions}
\frame{\tableofcontents[currentsection]}

\begin{frame}{Motivation}
    \begin{itemize}
        \item We've used builtin functions (\texttt{print, len, sorted});\\
            now we'll see how to make our own functions
        \item Why? Modularity; i.e., break down programs into smaller components
            \begin{itemize}
                \item Can create larger, more complex programs
                    from readily understandable building blocks
                \item Functions encapsulate complexity;
                    don't need to understand how a function works to use it
                \item Components are re-usable;
                    write once, use many times
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Defining functions}
Basic syntax:
\begin{lstlisting}
def function(param1, param2, ...):
    # do something with parameters
\end{lstlisting}

    A function definition has\dots
    \begin{itemize}
        \item A name
        \item Zero or more parameters
        \item An indented block of code
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Defining a function does not run it}
    \begin{itemize}
        \item Executing a \texttt{def} statement does not run the code!
        \item The function is stored along with its name
        \item Function must be called to run it
    \end{itemize}
    Example:
\begin{lstlisting}
def greeting():
    print('Hello!')

greeting()
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Function arguments}
    \begin{definition}
        A \structure{parameter} is a value expected by a function

        An \structure{argument} is a particular value for a parameter
            when calling a function
    \end{definition}

    \begin{itemize}
        \item Can pass data to functions using arguments
        \item Below, the argument \texttt{'John'} is assigned
            to the parameter \texttt{name} when the function is called
        \item Arguments have a specific order
        \item When calling a function, must use correct number of arguments
    \end{itemize}
Example:
\begin{lstlisting}
def greeting(name):
    print('Hello', name)

greeting('John')
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Returning results}
    \begin{itemize}
        \item A function does not need to return a result \\
            In this case,
            \begin{itemize}
                \item the function is used for its \emph{effect};\\
                    it does something (e.g., print text on screen)
                \item The value \texttt{None} is implicitly returned
                        (and usually ignored)
            \end{itemize}
        \item Use \texttt{return ...} to give a result back to the caller
        \item May occur anywhere in the function,\\
                immediately stops execution of the function.
    \end{itemize}

Example:
\begin{lstlisting}
def average(values):
    if len(values) == 0:
        return None
    return sum(values) / len(values)
\end{lstlisting}
\end{frame}

\begin{frame}{Summary}
    \begin{itemize}
        \item Break programs down into functions \\
            to make them easier to understand.
        \item Define a function using \texttt{def} with a name, parameters,\\
            and a block of code.
        \item Defining a function does not run it.
        \item Arguments in a call are matched to parameters in definition.
        \item Functions may return a result to their caller using \texttt{return}.
    \end{itemize}
\end{frame}




% Talk about reading files?
% Talk about counting words?

\section{Cleaning text}
\frame{\tableofcontents[currentsection]}

\begin{frame}{Goal: text $\rightarrow$ words}
    For basic text analysis,

    Want to consider only word frequencies of a text

    \pause
    Therefore:
    \begin{enumerate}
        \item Identify words
        \item Simplify text, remove non-words
        \item Count words to get frequencies
    \end{enumerate}
\end{frame}


\begin{frame}[fragile]{The split method}
We can turn a string into a list of strings
by splitting on a `separator':
\begin{lstlisting}
In: quote = "Frankly, my dear, I don't give a damn."
In: quote.split(",")
Out: ['Frankly', ' my dear', " I don't give a damn."]
\end{lstlisting}

\pause
If we don't give a character, splits on whitespace:
\begin{lstlisting}
In: quote.split()
Out: ['Frankly,', 'my', 'dear,', 'I', "don't", 'give', 'a', 'damn.']
\end{lstlisting}
\end{frame}


\begin{frame}[fragile]{Putting a list of strings back together as one string}
\begin{lstlisting}
In: ''.join(sorted(letters))
'cdo'
\end{lstlisting}
Equivalent of:
\begin{lstlisting}
In: 'c' + '' + 'd' + '' + 'o'
\end{lstlisting}

\texttt{sep.join(seq)} is the opposite of \texttt{str.split(sep)}
\end{frame}

\begin{frame}[fragile]{Upper and lower case}
    \begin{itemize}
        \item To the computer, these
            are three completely different words!

            \texttt{'John', 'john', 'JOHN'}
        \item Often, we don't want to make this distinction when counting
        \item One solution: case folding
    \end{itemize}
    \pause
\begin{lstlisting}
text = 'HeLlO WoRlD'
cleaned = text.lower()
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Punctuation}
    \begin{itemize}
        \item Similarly, punctuation should be separated from words
        \item Or should be eliminated completely
        \item Can use functionality similar to "find \& replace" for this
    \end{itemize}
    \pause
\begin{lstlisting}
text = "Forsooth, 'tis true!"
text = text.replace('!', '')
text = text.replace(',', '')
\end{lstlisting}
\end{frame}

% explain tricky tokenization cases


% \begin{frame}[fragile]{Counting}
% How to count the number of 'a's in a string?
% \begin{lstlisting}
% word = 'banana'
% count = 0
% \end{lstlisting}
% \pause
% \begin{lstlisting}
% for letter in word:
%     if letter == 'a':
%         count += 1
% print(count)
% \end{lstlisting}
% \end{frame}
% \begin{frame}[fragile]{Is there a better way?}
% Yes! Look at documentation on strings:
%
% \begin{block}{\texttt{str.count(sub[, start[, end]])}}
%     Return the number of non-overlapping occurrences of substring \emph{sub}
%     in the range \emph{[start, end]}.
%     Optional arguments start and end are interpreted as in slice notation.
% \end{block}
%
% See \url{http://docs.python.org/3/library/stdtypes.html#string-methods}
%
% \pause
% \begin{lstlisting}
% word = 'banana'
% print(word.count('a'))
% \end{lstlisting}
% \end{frame}

\begin{frame}{More complicated searches and substitutions}
What if we want to find or replace \dots
\begin{itemize}
    % \item Lines without a particular word
    % \item Lines with word$_1$ {\it or} word$_2$
    % \item Lines with both word$_1$ {\it and} word$_2$
    \item Words that start or end with certain letters
    \item Words that contain (or not) certain letters
    \item Words with a certain number of letters or substrings
    \item Words that follow a certain structure
\end{itemize}

Use regular expressions:\\
%\url{https://docs.python.org/3/howto/regex.html}
\url{https://www.programiz.com/python-programming/regex} \\
\url{https://www.datacamp.com/community/tutorials/python-regular-expression-tutorial}

Takes some time to learn, but extremely powerful!
\end{frame}

\begin{frame}{Summary}
    \begin{itemize}
        \item Text is often messy
        \item Cleaning removes non-words
        \item Extract and count words
    \end{itemize}
\end{frame}

% parsing a simple text file line-by-line, e.g. subtitles?
% list comprehensions? .strip() 

% \section{Complexity}
% \frame{\tableofcontents[currentsection]}
% explain complexity



\begin{frame}{Background reading}
    \begin{itemize}
        \item Downey ch.\ 3, 6, 11, 14
        \item and/or Zelle sec.\ 5.9, ch.\ 6
        \item Watch youtube tutorials of "Hacking the Humanities" episode 10--12:
            {\small \url{https://www.youtube.com/playlist?list=PL6kqrM2i6BPIpEF5yHPNkYhjHm-FYWh17}}
    \end{itemize}
\end{frame}
\end{document}
